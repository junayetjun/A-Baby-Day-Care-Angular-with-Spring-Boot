<app-navbar></app-navbar>

<div class="profile-page">

  <!-- Top Hero Section -->
  <section class="profile-hero" *ngIf="caregiver">
    <div class="hero-container">
      <div class="hero-photo-wrapper">
        <img [src]="'http://localhost:8085/images/caregiver/'+caregiver.photo" alt="Profile Image" class="hero-photo">
      </div>
      <div class="hero-info">
        <h1>{{ caregiver.name }}</h1>
        <p class="role">{{ caregiver.gender }}</p>
        <div class="hero-contact">
          <span><strong>Email:</strong> {{ caregiver.email }}</span>
          <span><strong>Phone:</strong> {{ caregiver.phone }}</span>
        </div>
      </div>
    </div>
  </section>

  <!-- Action Buttons -->
  <div class="action-buttons container">
    <button class="btn btn-primary" routerLink="/apply">Interested Appointments</button>
    <button class="btn btn-outline-primary" routerLink="/pinfo">Attach Personal Info</button>
  </div>

  <!-- Profile Sections -->
  <div class="profile-sections container">

    <!-- Personal Info Card -->
    <div class="info-card">
      <h3>Personal Information</h3>
      <div class="info-row">
        <span><strong>Address:</strong> {{ caregiver.address }}</span>
        <span><strong>Date of Birth:</strong> {{ caregiver.dateOfBirth }}</span>
      </div>
    </div>

    <!-- Education Section -->
    <div class="section-card" *ngIf="educations.length > 0">
      <h4>Academic Details</h4>
      <table class="table table-striped table-hover">
        <thead>
          <tr>
            <th>Class</th><th>Institute</th><th>Board</th><th>Result</th><th>Year</th><th>Action</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let edu of educations">
            <td>{{ edu.level }}</td>
            <td>{{ edu.institute }}</td>
            <td>{{ edu.board }}</td>
            <td>{{ edu.result }}</td>
            <td>{{ edu.year }}</td>
            <td><button class="btn btn-sm btn-danger" (click)="deleteEducation(edu.id)">Delete</button></td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Experience Section -->
    <div class="section-card" *ngIf="experiences.length > 0">
      <h4>Career Journey</h4>
      <table class="table table-striped table-hover">
        <thead>
          <tr>
            <th>Institution</th><th>Designation</th><th>From</th><th>To</th><th>Description</th><th>Action</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let exp of experiences">
            <td>{{ exp.institution }}</td>
            <td>{{ exp.position }}</td>
            <td>{{ exp.fromDate }}</td>
            <td>{{ exp.toDate }}</td>
            <td>{{ exp.description }}</td>
            <td><button class="btn btn-sm btn-danger" (click)="deleteExperience(exp.id)">Delete</button></td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Skills Section -->
    <div class="section-card" *ngIf="skills.length > 0">
      <h4>Expertise</h4>
      <table class="table table-striped table-hover">
        <thead>
          <tr><th>Name</th><th>Level</th><th>Action</th></tr>
        </thead>
        <tbody>
          <tr *ngFor="let skill of skills">
            <td>{{ skill.name }}</td>
            <td>{{ skill.level }}</td>
            <td><button class="btn btn-sm btn-danger" (click)="deleteSkill(skill.id)">Delete</button></td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Languages Section -->
    <div class="section-card" *ngIf="languages.length > 0">
      <h4>Language Proficiency</h4>
      <ul class="list-group list-group-flush">
        <li *ngFor="let language of languages" class="list-group-item d-flex justify-content-between align-items-center">
          {{ language.name }} <span class="badge bg-primary">{{ language.proficiency }}</span>
          <button class="btn btn-sm btn-danger" (click)="deleteLanguage(language.id)">Delete</button>
        </li>
      </ul>
    </div>

    <!-- Hobbies Section -->
    <div class="section-card" *ngIf="hobbies.length > 0">
      <h4>Hobbies & Interests</h4>
      <ul class="list-group list-group-flush">
        <li *ngFor="let hobby of hobbies" class="list-group-item d-flex justify-content-between align-items-center">
          {{ hobby.name }}
          <button class="btn btn-sm btn-danger" (click)="deleteHobby(hobby.id)">Delete</button>
        </li>
      </ul>
    </div>

    <!-- References Section -->
    <div class="section-card" *ngIf="references.length > 0">
      <h4>Recommendations</h4>
      <table class="table table-striped table-hover">
        <thead>
          <tr><th>Name</th><th>Contact</th><th>Relation</th><th>Action</th></tr>
        </thead>
        <tbody>
          <tr *ngFor="let reference of references">
            <td>{{ reference.name }}</td>
            <td>{{ reference.contact }}</td>
            <td>{{ reference.relation }}</td>
            <td><button class="btn btn-sm btn-danger" (click)="deleteReference(reference.id)">Delete</button></td>
          </tr>
        </tbody>
      </table>
    </div>

  </div>
</div>
